extends ../layout
block content
	.col-lg-1.col-centered
		-myRole = 'glusterfs_replica'
		include status_modal.jade
		h1.page-header Shared storage - GlusterFS Replica
			if allRolesSimple[myRole]  && reportStatus == "successful"
				img(src="/img/icon_success_pink.png",style="float:right;width:64px;",alt="Installed!")
		if reportStatus != ""
			p 
				a(href="/servers/status/events/#{latestReport.hash}")
					|Â Latest provisioning run: #{reportStatus}
		if currentStep.route == path && allRolesSimple[myRole]  && reportStatus == "successful"
			h3 Installation complete!
			p
				button.btn.btn-lg.btn-success(type="submit",onClick="window.location.href = '/wizard/next_step';") Next Step

		.panel.panel-primary
			.panel-heading
				h3.panel-title Replication?
			.panel-body
				| A glusterfs volume can be replicated on as many storage servers as you would like, at least 1 server is required
					

		.panel.panel-primary
			.panel-heading
				h3.panel-title Requirements
			.panel-body
				| This installation process will take care of the complete installation of GlusterFS on as many nodes as you like. Before you start, make sure you have the following:
				ul
					li 2 or more base installed Ubuntu 14.04 servers
					li A physical volume available on each server (path configurable but should be the same on all servers)
					li (otpional) 2 network cards (make sure dns points to the network to use for storage traffic or enter the ip address on the storage net below)
					
															

		
		span Software installed:
			ul
				li GlusterFS
				
		span Firewall table (incoming traffic):
		table.table.table-striped
			thead
				tr
					th Port
					th Protocol
					th type
					th Source
			tbody
				include firewall/global.jade
				include firewall/glusterfs.jade
				
		if ( allRolesSimple[myRole] != "installed" )
			.panel.panel-primary
				.panel-heading
					h3.panel-title Specify several nodes
				.panel-body
					| If you have more than 1 node specify all of them separated by comma in the hostname field below.
					
			.panel.panel-primary
				.panel-heading
					h3.panel-title Important!
				.panel-body
					| You need to add the hostname of your glusterfs replicas to the configuration field "peers" below. Separate the hostnames by comma!
		
			include ../servers/add_server.jade
			-displayConfigure = "none"
			include ../servers/configure_server.jade
		else
			-configureOnly = true
			-displayConfigure = "block"
			include ../servers/configure_server.jade
			include ../servers/add_server.jade
		
		
		input(type="hidden", id="serverRole", value="#{myRole}")

