extends ../layout
block content
	.col-lg-1.col-centered
		-myRole = 'fsagent'
		include status_modal.jade
		h1.page-header Atomia Filesystem agent
			if allRolesSimple[myRole]  && reportStatus == "successful"
				img(src="/img/icon_success_pink.png",style="float:right;width:64px;",alt="Installed!")
		if reportStatus != ""
			p 
				a(href="/servers/status/events/#{latestReport.hash}")
					|Â Latest provisioning run: #{reportStatus}
		if currentStep.route == path && allRolesSimple[myRole]  && reportStatus == "successful"
			h3 Installation complete!
			p
				button.btn.btn-lg.btn-success(type="submit",onClick="window.location.href = '/wizard/next_step';") Next Step

		.panel.panel-primary
			.panel-heading
				h3.panel-title Atomia Filesystem agent?
			.panel-body
				| Atomia File System agent is a light-weight REST service, written in node.js, which exposes methods for managing file system in the Atomia system. It is designed to be simple, fast and most of all, safe. As a consequence, files and folders can be created only on specific, pre-defined, paths and with owner set to the currently authenticated user. 
					

		.panel.panel-primary
			.panel-heading
				h3.panel-title Requirements
			.panel-body
				| You need
				ul
					li A base installed Ubuntu 14.04 server
																	
		span Software installed:
			ul
				li AtomiaDNS
				
		span Firewall table (incoming traffic):
		table.table.table-striped
			thead
				tr
					th Port
					th Protocol
					th type
					th Source
			tbody
				include firewall/global.jade
				include firewall/atomiadns.jade
				
		if ( allRolesSimple[myRole] != "installed" )		
			include ../servers/add_server.jade
			-displayConfigure = "none"
			include ../servers/configure_server.jade
		else
			-configureOnly = true
			-displayConfigure = "block"
			include ../servers/configure_server.jade
			include ../servers/add_server.jade
		
		
		input(type="hidden", id="serverRole", value="#{myRole}")
